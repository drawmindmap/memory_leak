<!DOCTYPE html>
<html>
<head>
<script type="text/javascript">
'use strict';

function LeakObject () {
  this.value = new Array(1000).join(new Array(1000).join('' + Math.random()));
}

var newObj = null;

function addLeak() {
  var oldObj = newObj;
  newObj = {
    leakObj: new LeakObject(),
    // oldObj: oldObj
    closure: function () {
      console.log(oldObj);
    }
  };
}

function releaseLeak () {
  newObj = null;
}
</script>
</head>
<body>
<button onclick="addLeak()">Add Leak</button>
<button onclick="releaseLeak()">Release Leak</button>
</body>
</html>
